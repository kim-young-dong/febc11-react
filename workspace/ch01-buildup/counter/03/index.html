<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Counter</title>
  </head>
  <body>
    <!-- <div id="app">
      <header>
        <h1>Counter - HTML + JS</h1>
        <p>파일 경로: <span id="filepath"></span></p>
      </header>
      <div id="counter">
        <button type="button" onclick="handleDown()">-</button>
        <button type="button" onclick="handleReset(event)">0</button>
        <button type="button" onclick="handleUp()">+</button>
        <span>0</span>
      </div>
    </div> -->

    <script type="module">
      // type="module"을 사용하면 ES6 모듈을 사용할 수 있습니다.
      // module은 기본적으로 비동기로 동작합니다. HTML 파싱이 완료된 후 실행됩니다.
      import { renos } from "./index.js";
      // UI 구조 생성

      const $filepathSpan = renos.createElement("span", { id: "filepath" });
      const $p = renos.createElement("p", null, "파일 경로: ", $filepathSpan);
      const $h1 = renos.createElement("h1", null, "Counter - HTML + JS");

      const $downBtn = renos.createElement(
        "button",
        { type: "button", onclick: "handleDown()" },
        "-"
      );
      const $resetBtn = renos.createElement(
        "button",
        { type: "button", onclick: "handleReset(event)" },
        "0"
      );
      const $upBtn = renos.createElement(
        "button",
        { type: "button", onclick: "handleUp()" },
        "+"
      );
      const $counterSpan = renos.createElement("span", null, "0");

      const $counter = renos.createElement(
        "div",
        { id: "counter" },
        $downBtn,
        $resetBtn,
        $upBtn,
        $counterSpan
      );
      const $header = renos.createElement("header", null, $h1, $p);

      const $app = renos.createElement("div", { id: "app" }, $header, $counter);
      document.body.appendChild($app);
    </script>

    <script type="module">
      document.querySelector("#filepath").textContent = `ch${
        document.URL.split("/ch")[1]
      }index.html`;
    </script>

    <script type="text/javascript">
      // 상태 관리

      let count = 0;

      const handleDown = () => {
        count--;
        render();
      };
      const handleUp = () => {
        count++;
        render();
      };
      const handleReset = (event) => {
        count = 0;
        render();
      };

      const render = () => {
        const $counterSpan = document.querySelector("#counter > span");
        $counterSpan.textContent = count;
      };
    </script>
  </body>
</html>
